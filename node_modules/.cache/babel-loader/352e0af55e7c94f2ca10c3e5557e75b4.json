{"ast":null,"code":"import _toConsumableArray from\"/Users/student/Desktop/Real-Time-Chat/real-time-chat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/student/Desktop/Real-Time-Chat/real-time-chat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import'./style.css';import io from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatComponent=function ChatComponent(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),chatMsg=_useState4[0],setChatMsg=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),socket=_useState6[0],setSocket=_useState6[1];useEffect(function(){var newSocket=io(\"http://localhost:8080/\");setSocket(newSocket);newSocket.on('message_sent',function(data){console.log('received message',data);messages.push(data);setMessages(_toConsumableArray(messages));});return function(){return newSocket.close();};},[setSocket,messages]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"\".concat(props.chatname)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-messages-container\",children:[messages.length===0&&/*#__PURE__*/_jsx(\"p\",{style:{width:'100%',textAlign:'center'},children:\"No Messages to be Read :(\"}),messages.map(function(message,index){return/*#__PURE__*/_jsx(ChatMessageComponent,{name:message.name,message:message.msg,time:message.time},message.name+index);}),/*#__PURE__*/_jsx(\"div\",{className:\"line-with-text-container\",children:/*#__PURE__*/_jsx(\"p\",{className:\"line-with-text\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Oct 4, 2021\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"input-container\",onSubmit:function onSubmit(e){e.preventDefault();var data={name:socket.id,msg:chatMsg,time:new Date()};setChatMsg('');socket.emit('message_sent',data);},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:'Type a new message...',value:chatMsg,onChange:function onChange(e){setChatMsg(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"strong\",{children:'>>'})})]})]});};var ChatMessageComponent=function ChatMessageComponent(props){return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-message-container\",children:[/*#__PURE__*/_jsx(\"p\",{style:{flexGrow:1},children:/*#__PURE__*/_jsx(\"strong\",{children:\"\".concat(props.name,\" | \").concat(props.message)})}),/*#__PURE__*/_jsx(\"p\",{children:\"\".concat(props.time)})]});};export default ChatComponent;","map":{"version":3,"sources":["/Users/student/Desktop/Real-Time-Chat/real-time-chat/src/components/chat-component/index.js"],"names":["useEffect","useState","io","ChatComponent","props","messages","setMessages","chatMsg","setChatMsg","socket","setSocket","newSocket","on","data","console","log","push","close","chatname","length","width","textAlign","map","message","index","name","msg","time","e","preventDefault","id","Date","emit","target","value","ChatMessageComponent","flexGrow"],"mappings":"8VAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAO,aAAP,CAEA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,C,wFAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,CAC7B,cAAgCH,QAAQ,CAAC,EAAD,CAAxC,wCAAOI,QAAP,eAAiBC,WAAjB,eACA,eAA8BL,QAAQ,CAAC,EAAD,CAAtC,yCAAOM,OAAP,eAAgBC,UAAhB,eACA,eAA4BP,QAAQ,CAAC,IAAD,CAApC,yCAAOQ,MAAP,eAAeC,SAAf,eAEAV,SAAS,CAAC,UAAM,CACZ,GAAMW,CAAAA,SAAS,CAAGT,EAAE,0BAApB,CACAQ,SAAS,CAACC,SAAD,CAAT,CAEAA,SAAS,CAACC,EAAV,CAAc,cAAd,CAA8B,SAACC,IAAD,CAAU,CACpCC,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAgCF,IAAhC,EAEAR,QAAQ,CAACW,IAAT,CAAcH,IAAd,EACAP,WAAW,oBAAKD,QAAL,EAAX,CACH,CALD,EAOA,MAAO,kBAAMM,CAAAA,SAAS,CAACM,KAAV,EAAN,EAAP,CACH,CAZQ,CAYN,CAACP,SAAD,CAAYL,QAAZ,CAZM,CAAT,CAcA,mBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,YAAK,SAAS,CAAC,aAAf,uBACI,8BAAQD,KAAK,CAACc,QAAd,GADJ,EADJ,cAKI,aAAK,SAAS,CAAC,yBAAf,WAESb,QAAQ,CAACc,MAAT,GAAoB,CAArB,eAA2B,UAAG,KAAK,CAAE,CAACC,KAAK,CAAE,MAAR,CAAgBC,SAAS,CAAE,QAA3B,CAAV,uCAFnC,CAMQhB,QAAQ,CAACiB,GAAT,CAAa,SAACC,OAAD,CAAkBC,KAAlB,CAAoC,CAC7C,mBACI,KAAC,oBAAD,EAAiD,IAAI,CAAED,OAAO,CAACE,IAA/D,CAAqE,OAAO,CAAEF,OAAO,CAACG,GAAtF,CAA2F,IAAI,CAAEH,OAAO,CAACI,IAAzG,EAA2BJ,OAAO,CAACE,IAAR,CAAeD,KAA1C,CADJ,CAGH,CAJD,CANR,cAaI,YAAK,SAAS,CAAC,0BAAf,uBACI,UAAG,SAAS,CAAC,gBAAb,uBAA8B,qCAA9B,EADJ,EAbJ,GALJ,cAuBI,cAAM,SAAS,CAAC,iBAAhB,CAAkC,QAAQ,CAAE,kBAACI,CAAD,CAAO,CAC/CA,CAAC,CAACC,cAAF,GAEA,GAAMhB,CAAAA,IAAI,CAAG,CACTY,IAAI,CAAEhB,MAAM,CAACqB,EADJ,CAETJ,GAAG,CAAEnB,OAFI,CAGToB,IAAI,CAAE,GAAII,CAAAA,IAAJ,EAHG,CAAb,CAMAvB,UAAU,CAAC,EAAD,CAAV,CAEAC,MAAM,CAACuB,IAAP,CAAY,cAAZ,CAA4BnB,IAA5B,EACH,CAZD,wBAaI,cAAO,WAAW,CAAE,uBAApB,CAA6C,KAAK,CAAEN,OAApD,CAA6D,QAAQ,CAAE,kBAACqB,CAAD,CAAK,CACxEpB,UAAU,CAACoB,CAAC,CAACK,MAAF,CAASC,KAAV,CAAV,CACH,CAFD,EAbJ,cAgBI,qCAAQ,wBAAS,IAAT,EAAR,EAhBJ,GAvBJ,GADJ,CA4CH,CA/DD,CAiEA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAAC/B,KAAD,CAAW,CACpC,mBACI,aAAK,SAAS,CAAC,wBAAf,wBACI,UAAG,KAAK,CAAE,CAACgC,QAAQ,CAAC,CAAV,CAAV,uBAAwB,kCAAYhC,KAAK,CAACqB,IAAlB,eAA4BrB,KAAK,CAACmB,OAAlC,GAAxB,EADJ,cAEI,6BAAOnB,KAAK,CAACuB,IAAb,GAFJ,GADJ,CAMH,CAPD,CASA,cAAexB,CAAAA,aAAf","sourcesContent":["import { useEffect, useState } from 'react';\nimport './style.css';\n\nimport io from 'socket.io-client';\n\nconst ChatComponent = (props) => {\n    const [messages, setMessages] = useState([]);\n    const [chatMsg, setChatMsg] = useState('');\n    const [socket, setSocket] = useState(null);\n\n    useEffect(() => {\n        const newSocket = io(`http://localhost:8080/`);\n        setSocket(newSocket);\n\n        newSocket.on( 'message_sent', (data) => {\n            console.log('received message', data);\n            \n            messages.push(data);\n            setMessages([...messages]);\n        });\n\n        return () => newSocket.close();\n    }, [setSocket, messages]);\n\n    return (\n        <div className='chat-container'>\n            <div className='chat-header'>\n                <h2>{`${props.chatname}`}</h2>\n            </div>\n\n            <div className='chat-messages-container'>\n                {\n                    (messages.length === 0) && <p style={{width: '100%', textAlign: 'center'}}>No Messages to be Read :(</p>\n                }\n\n                {\n                    messages.map((message: string, index: number) => {\n                        return(\n                            <ChatMessageComponent key={message.name + index} name={message.name} message={message.msg} time={message.time}></ChatMessageComponent>\n                        );\n                    })\n                }\n\n                <div className='line-with-text-container'>\n                    <p className='line-with-text'><span>Oct 4, 2021</span></p>\n                </div>\n            </div>\n\n            <form className='input-container' onSubmit={(e) => {\n                e.preventDefault();\n\n                const data = {\n                    name: socket.id,\n                    msg: chatMsg,\n                    time: new Date()\n                };\n\n                setChatMsg('');\n\n                socket.emit('message_sent', data);\n            }}>\n                <input placeholder={'Type a new message...'} value={chatMsg} onChange={(e)=>{\n                    setChatMsg(e.target.value);\n                }}></input>\n                <button><strong>{'>>'}</strong></button>\n            </form>\n        </div>\n    );\n}\n\nconst ChatMessageComponent = (props) => {\n    return (\n        <div className='chat-message-container'>\n            <p style={{flexGrow:1}}><strong>{`${props.name} | ${props.message}`}</strong></p>\n            <p>{`${props.time}`}</p>\n        </div>\n    );\n}\n\nexport default ChatComponent;"]},"metadata":{},"sourceType":"module"}