{"ast":null,"code":"import _toConsumableArray from\"/Users/student/Desktop/Real-Time-Chat/real-time-chat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/student/Desktop/Real-Time-Chat/real-time-chat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import'./style.css';import io from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var date=new Date();var dateString=date.getMonth()+1+\"/\"+date.getDay()+\"/\"+date.getFullYear();var ChatComponent=function ChatComponent(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),chatMsg=_useState4[0],setChatMsg=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),userName=_useState6[0],setUserName=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),socket=_useState8[0],setSocket=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),sentFirstMessage=_useState10[0],setSentFirstMessage=_useState10[1];useEffect(function(){var newSocket=io(\"http://localhost:8080/\");setSocket(newSocket);newSocket.on('message_sent',function(data){console.log('received message',data);messages.push(data);console.log('messages',messages);setMessages(_toConsumableArray(messages));});return function(){return newSocket.close();};},[setSocket,messages]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"\".concat(props.chatname)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-messages-container\",children:[messages.length===0&&/*#__PURE__*/_jsx(\"p\",{style:{width:'100%',textAlign:'center'},children:\"No Messages to be Read :(\"}),messages.map(function(message,name,index){return/*#__PURE__*/_jsx(ChatMessageComponent,{name:message.name,message:message.msg,time:message.time},message.name+index);}),/*#__PURE__*/_jsx(\"div\",{className:\"line-with-text-container\",children:/*#__PURE__*/_jsx(\"p\",{className:\"line-with-text\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\" \",dateString,\" \"]})})})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"input-container\",onSubmit:function onSubmit(e){setSentFirstMessage(true);e.preventDefault();var data={name:userName,msg:chatMsg,time:new Date()};setChatMsg('');// setUserName('');\nsocket.emit('message_sent',data);},children:[!sentFirstMessage&&/*#__PURE__*/_jsx(\"input\",{placeholder:'Type your username...',value:userName,onChange:function onChange(e){setUserName(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{placeholder:'Type a new message...',value:chatMsg,onChange:function onChange(e){setChatMsg(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"strong\",{children:'>>'})})]})]});};var ChatMessageComponent=function ChatMessageComponent(props){return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-message-container\",children:[/*#__PURE__*/_jsx(\"p\",{style:{flexGrow:1},children:/*#__PURE__*/_jsx(\"strong\",{children:\"\".concat(props.name,\" | \").concat(props.message)})}),/*#__PURE__*/_jsx(\"p\",{children:\"\".concat(props.time)})]});};export default ChatComponent;","map":{"version":3,"sources":["/Users/student/Desktop/Real-Time-Chat/real-time-chat/src/components/chat-component/index.js"],"names":["useEffect","useState","io","date","Date","dateString","getMonth","getDay","getFullYear","ChatComponent","props","messages","setMessages","chatMsg","setChatMsg","userName","setUserName","socket","setSocket","sentFirstMessage","setSentFirstMessage","newSocket","on","data","console","log","push","close","chatname","length","width","textAlign","map","message","name","index","msg","time","e","preventDefault","emit","target","value","ChatMessageComponent","flexGrow"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport './style.css';\n\nimport io from 'socket.io-client';\n\nvar date = new Date();\nvar dateString = (date.getMonth() + 1) + \"/\" + date.getDay() + \"/\" + date.getFullYear();\n\nconst ChatComponent = (props) => {\n    const [messages, setMessages] = useState([]);\n    const [chatMsg, setChatMsg] = useState('');\n    const [userName, setUserName] = useState('');\n    const [socket, setSocket] = useState(null);\n    const [sentFirstMessage, setSentFirstMessage] = useState(false);\n\n    useEffect(() => {\n        const newSocket = io(`http://localhost:8080/`);\n        setSocket(newSocket);\n\n        newSocket.on( 'message_sent', (data) => {\n            console.log('received message', data);\n            \n            messages.push(data);\n            console.log('messages', messages);\n            setMessages([...messages]);\n        });\n\n        return () => newSocket.close();\n    }, [setSocket, messages]);\n\n    return (\n        <div className='chat-container'>\n            <div className='chat-header'>\n                <h2>{`${props.chatname}`}</h2>\n            </div>\n\n            <div className='chat-messages-container'>\n                {\n                    (messages.length === 0) && <p style={{width: '100%', textAlign: 'center'}}>No Messages to be Read :(</p>\n                }\n\n                {\n                    messages.map((message: string, name: string, index: number) => {\n                        return(\n                            <ChatMessageComponent key={message.name + index} name={message.name} message={message.msg} time={message.time}></ChatMessageComponent>\n                        );\n                    })\n                }\n\n                <div className='line-with-text-container'>\n                    <p className='line-with-text'><span> {dateString} </span></p>\n                </div>\n            </div>\n\n            <form className='input-container' onSubmit={(e) => {\n                setSentFirstMessage(true);\n\n                e.preventDefault();\n\n                const data = {\n                    name: userName,\n                    msg: chatMsg,\n                    time: new Date()\n                };\n\n                setChatMsg('');\n                // setUserName('');\n\n                socket.emit('message_sent', data);\n            }}>\n                { (!sentFirstMessage) && \n                    \n                    <input placeholder={'Type your username...'} value={userName} onChange={(e)=>{\n                        setUserName(e.target.value);\n                    }}></input>\n                }\n                <input placeholder={'Type a new message...'} value={chatMsg} onChange={(e)=>{\n                    setChatMsg(e.target.value);\n                }}></input>\n                <button><strong>{'>>'}</strong></button>\n            </form>\n        </div>\n    );\n}\n\nconst ChatMessageComponent = (props) => {\n    return (\n        <div className='chat-message-container'>\n            <p style={{flexGrow:1}}><strong>{`${props.name} | ${props.message}`}</strong></p>\n            <p>{`${props.time}`}</p>\n        </div>\n    );\n}\n\nexport default ChatComponent;"]},"metadata":{},"sourceType":"module"}